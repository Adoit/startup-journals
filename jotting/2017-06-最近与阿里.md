## 最近与阿里

最近正式接手了公司的与阿里电商事业部某共建项目的研发工作。在此之前，我与阿里人都有过不同程度的接触，有前同事跳槽去阿里的，也曾和阿里走出来的一起创业过，也有过在某些技术会议上讨论的经历。但这一次较之以往的不同之处在于：

* 这次接触的阿里人来自电商事业部，我之前接触的都来自阿里云、航旅和支持宝
* 分别以不同公司代表的身份接触
* 共建项目的合作伙伴，我们作为阿里提供给其电商的B端用户的某项目服务的提供商之一，项目部署在阿里EWS上

我司是矩阵式的管理，接手之前，阿里项目并没有成立专门的项目组，而是从不同的职能部门调配资源来进行研发。矩阵式管理在公司还处于起步阶段时，来自“横纵”两个维度的管理常常会让研发人员顾此失彼，项目的研发工作整体进展并不顺利，遇到问题的响应处理速度很非常慢。阿里对成功率和响应时间都有“严格”的要求：

* 成功率、响应时间、服务质量公示给阿里电商系用户，类似于C端用户看到的淘宝、天猫商家的服务质量一样
* 成功率=成功响应的请求数 / (初次请求数 + 失败重试请求数)，当遇到服务端5xx或响应超时等情况时，阿里会定时重新发起请求
* 响应时间<10s，否则会进行超时重试
* 事故问责，阿里会对我们进行考核，对事故等级有了明确的规定与相应的处罚措施

5月份我接手项目第二天，线上出现了一次非常严重的质量事故，当天的成功率已经跌至10%左右，当时的影响很恶劣，据说已经惊动了阿里电商的总经理，每被其他部门的同事问及时，我都调侃说”哥们儿小出名了“。当时项目研发存在很多问题，代码质量差、无单元测试、修复bug不及时、部署上线流程混乱，没有应急预案等。坏事变好事的是，公司也因为此次事故，专门成立了阿里项目组，原有的几个研发人员都全职来负责阿里的项目。目前，经过一个月的努力，之前存在的问题已经都基本上得到了解决，每周两次的上线，线上的服务已经稳定下来。

## “强势”的阿里

对于阿里文化的“强势”素有耳闻，无论是最近菜鸟网络与顺风的争议，还是高德被阿里收购后大量原有员工离职的现象，都可见一斑。在我所处的该项目上，也经常可以感受到阿里的“强势”。

* 共建项目部署在阿里EWS上，虽属共建项目，但平台搭建费用由我司全部承担，费用全部由我司出是公司的决定，但是平台我们没有管理权限，只有提供一些基础访问权限，线上部署，经常要找阿里方面的人来支持，预生产创建个库，加个访问白名单等，而实际的情况是我们类似的需求经常得不到及时的响应，记得我们准备在预生产环境创建个数据库，足足一天才建完，这样还经常被抱怨我们打断他们工作，想必是“创建数据库”这类的工作并不在其KPI中吧，阿里人的时间更为宝贵些吧。
* EWS并不完善，EWS(Enterprise Work Station)，原来叫TAE(Taobao App Engine)，可以简单理解为EWS是针对电商平台定制开发的容器服务。但EWS现在还是有很多不完善的地方：
  * 不稳定，经常遇到过无法重启容器的错误，最近还出现过一次无法连接镜像仓库的问题，一天后才恢复正常
  * 负载均衡服务仅支持完全均衡负载，不支持自定义分配权重。这意为着当我们无法利用此进行流量的控制，灰度发布一个服务不能达到先引入一部分流量的目的，而且遇到了问题只能靠手动停止服务后端的container来关闭流量。另一个非常头痛的问题是，启动一个Web容器成功后，内部的服务可能并没有完全启动，这时所有引入的该容器的请求都会把timeout的错误。这个问题在几个月前就已经反馈给阿里了，虽然他们很开放的接受建议，但目前还没有解决，我们不得不找一个流量小的时刻进行发布升级等操作，以尽可能的降低影响
  * 较之于阿里云提供的产品服务，工单、社区等支持有限
* 沟通态度欠佳。有一个钉钉群，除了我们，里面有阿里的员工，还有一些商家，他们与商家沟通时，经常也很不耐烦。类似于“不纠结了，肯定是你们的问题”之类的表述经常出现。

## 关于阿里生态

马云提出了新零售的概念，并声称不要一家独大，而是建立一个生态体系。但最终是与各方建立一共荣的生态体系，还是让各方都归顺其阿里帝国，只能看最终的执行效果了。

